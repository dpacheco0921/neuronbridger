<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get EM-LM neuron matches for fly brain neurons from neuronbridge.janelia.org — neuronbridge_hits • neuronbridger</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Get EM-LM neuron matches for fly brain neurons from neuronbridge.janelia.org — neuronbridge_hits" />
<meta property="og:description" content="The function neuronbridge_hits retreives a ranked list of hits for a MIP file search.
Specify the MIP file you want to search for by using its nb.id. This can be found by
using neuronbridge_info. neuronbridge_search will run neuronbridge_info and then neuronbridge_hits, to make things easier.
The function neuronbridge_search can also handle being given multiple IDs, i.e. searching for multiple data items at once.
MIP options can be fetched and visualised with neuronbridge_mip." />
<meta property="og:image" content="/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">neuronbridger</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/natverse/neuronbridger/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get EM-LM neuron matches for fly brain neurons from neuronbridge.janelia.org</h1>
    <small class="dont-index">Source: <a href='https://github.com/natverse/neuronbridger/blob/master/R/search.R'><code>R/search.R</code></a></small>
    <div class="hidden name"><code>neuronbridge_hits.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function <code>neuronbridge_hits</code> retreives a ranked list of hits for a MIP file search.
Specify the MIP file you want to search for by using its <code>nb.id</code>. This can be found by
using <code><a href='neuronbridge_info.html'>neuronbridge_info</a></code>. <code>neuronbridge_search</code> will run <code>neuronbridge_info</code> and then <code>neuronbridge_hits</code>, to make things easier.
The function <code>neuronbridge_search</code> can also handle being given multiple IDs, i.e. searching for multiple data items at once.
MIP options can be fetched and visualised with <code><a href='neuronbridge_mip.html'>neuronbridge_mip</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>neuronbridge_hits</span><span class='op'>(</span><span class='va'>nb.id</span>, version <span class='op'>=</span> <span class='st'>"v2_1_1"</span><span class='op'>)</span>

<span class='fu'>neuronbridge_search</span><span class='op'>(</span>
  <span class='va'>id</span>,
  version <span class='op'>=</span> <span class='st'>"v2_1_1"</span>,
  dataset <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"detect"</span>, <span class='st'>"by_line"</span>, <span class='st'>"by_body"</span><span class='op'>)</span>,
  threshold <span class='op'>=</span> <span class='fl'>10000</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>nb.id</th>
      <td><p>an internal ID used by <a href='https://neuronbridge.janelia.org/'>neuronbridge.janelia.org</a> to identigy neurons/lines. This
differs from <code>id</code> used by other functions, and can be found using <code><a href='neuronbridge_info.html'>neuronbridge_info</a></code>.</p></td>
    </tr>
    <tr>
      <th>version</th>
      <td><p>the precomputed scores to search. For example, <code>"v2_1_1"</code> refers to this <a href='https://neuronbridge.janelia.org/releasenotes/DATA'>release</a>.</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>character vector. An identifier/identifiers for the neuron(s)/line(s) you wish to search. This can either be a line code
for a GAL4 line (e.g. <a href='https://v2.virtualflybrain.org/org.geppetto.frontend/geppetto?id=VFBexp_FBtp0057908&amp;i=VFB_00017894'>R16F12</a>)
or a split GAL4 line (e.g. <a href='https://splitgal4.janelia.org/cgi-bin/view_splitgal4_imagery.cgi?line=LH173'>LH173</a>)
or a 'body ID' for a neuron from the <a href='https://neuprint.janelia.org/help/videos?dataset=hemibrain'>hemibrain connectome</a>,
(e.g. <a href='https://neuprint.janelia.org/view?bodyid=1537331894'>1537331894</a>).</p></td>
    </tr>
    <tr>
      <th>dataset</th>
      <td><p>whether the ID given is a body ID (<code>"by_body"</code>) from the hemibrain connectome
or a genetic driver line (<code>"by_line"</code>). If left at <code>"detect"</code> then <code>neuronbridger</code> tries to guess to which <code>id</code> belongs by using
<code>neuronbridger:::guess_dataset</code>.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>LM-EM matches with a <code>normalizedScore</code> below this value are not returned. If set to <code>NULL</code>, the results are not filtered.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a <code>data.frame</code> of hits. Each row idnciates a separate MIP file with its own <code>nb.id</code>. The <code>data.frame</code> is already ranked by <code>normalizedScore</code>.
Top scores (better match) are at the top of the data frame. The columns mean:</p><ul>
<li><p>"publishedName"  - the <code>id</code> for the potential hit neuron/line. I.e. specififes a genetic driver resource or a connectome neuron.
  these are the same ids that can be seen with <code><a href='neuronbridge_ids.html'>neuronbridge_ids</a></code>.</p></li>
<li><p>"libraryName" - the data set from which this data item came.</p></li>
<li><p>"imageURL" - the path on https://s3.amazonaws.com/, at which one can find a 'high res' .png of the MIP file for this data item.</p></li>
<li><p>"thumbnailURL" - the path on https://s3.amazonaws.com/, at which one can find a 'low res' .jpg thumbnail of the MIP file for this data item.</p></li>
<li><p>"slideCode" - the unique identifier for the sample from which the MIP came. The first number indicates the date the image was taken by FlyLight.</p></li>
<li><p>"objective" - the magnification under which the imasge was taken.</p></li>
<li><p>"gender" - the sex of the fly brain which this data item derives. f = female, m = male.</p></li>
<li><p>"anatomicalArea" - the gross part of the nervous system images, e.g. brain or ventral nervous system.</p></li>
<li><p>"alignmentSpace" - the template brain to which the image that formed this MIP, was aligned.
  Typically, this is the JR2018 standard template brain from <a href='https://doi.org/10.1101/376384'>Bogovic et al. 2018</a>.</p></li>
<li><p>"channel" - number of the channel from the aligned image stack that is represented by this MIP.</p></li>
<li><p>"mountingProtocol" - the protocol used to prepare brain sample for imaging.</p></li>
<li><p>"matchingPixels" - the number of overlapping pixels between query (<code>searched.id</code>) and taregt (<code>nb.id</code>).</p></li>
<li><p>"gradientAreaGap " - unsure, seeking clarification from NeuronBridge</p></li>
<li><p>"normalizedGapScore" - unsure, seeking clarification from NeuronBridge</p></li>
<li><p>"normalizedScore" - the matching score, created by examining the overlapped pixel number and color depth.
  If the color and xy position of the pixel match between the mask and the searching data,
  then the approach here will count it as a positive matching score</p></li>
<li><p>"searched.id" - the <code>nb.id</code> you searched with, i.e. given to the function call</p></li>
<li><p>"nb.id" - the 'NeuronBridge ID' for the MIP file.</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='neuronbridge_info.html'>neuronbridge_info</a></code>,
  <code><a href='neuronbridge_mip.html'>neuronbridge_mip</a></code>,
  <code><a href='neuronbridge_ids.html'>neuronbridge_ids</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='va'>nb.info.em</span> <span class='op'>=</span> <span class='fu'><a href='neuronbridge_info.html'>neuronbridge_info</a></span><span class='op'>(</span><span class='st'>"542634818"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: invalid factor level, NA generated</span></div><div class='input'><span class='va'>nb.hits</span> <span class='op'>=</span> <span class='fu'>neuronbridge_hits</span><span class='op'>(</span><span class='va'>nb.info.em</span><span class='op'>$</span><span class='va'>nb.id</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: invalid factor level, NA generated</span></div><div class='input'><span class='co'># View(nb.hits[1:10,]) # see the top 10 hits</span>

<span class='co'># One can also do this in one with:</span>
<span class='va'>nb.search</span> <span class='op'>=</span> <span class='fu'>neuronbridge_search</span><span class='op'>(</span><span class='st'>"542634818"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: invalid factor level, NA generated</span></div><div class='output co'>#&gt; <span class='warning'>Warning: invalid factor level, NA generated</span></div><div class='input'><span class='co'>## However, this differs from the above in that every MIP</span>
<span class='co'>## associated with the given id, is searched. For a connectome</span>
<span class='co'>## neuron this is just 1, but for a GAL4 line with MCFO data it</span>
<span class='co'>## can be many quite different images.</span>

<span class='co'># Note that nb.info.em here is actually an attribute you can see</span>
<span class='va'>nb.info.em</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>nb.search</span>,<span class='st'>"search"</span><span class='op'>)</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alexander Bates.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


