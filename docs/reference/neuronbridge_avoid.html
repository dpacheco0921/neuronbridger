<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get LM-EM matches for one set of neurons while avoiding another set — neuronbridge_avoid • neuronbridger</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Get LM-EM matches for one set of neurons while avoiding another set — neuronbridge_avoid" />
<meta property="og:description" content="This function uses neuronbridge_search to get potential matches for data items (i.e. neurons/lines) that you wish to search
(search). It also fetches the same information on data items you would rather not have in your 'hits', i.e.
hemibrain connectome neurons that you do not want to 'also'-be in the lines that come up when you search for you neurons in search. Depending
on your use-case, you may want to read a series of table with neuronbridge_search rather than use this function, to filter your matches.
See details below." />
<meta property="og:image" content="/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">neuronbridger</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/split_design.html">split GAL4 design</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/natverse/neuronbridger/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get LM-EM matches for one set of neurons while avoiding another set</h1>
    <small class="dont-index">Source: <a href='https://github.com/natverse/neuronbridger/blob/master/R/identify.R'><code>R/identify.R</code></a></small>
    <div class="hidden name"><code>neuronbridge_avoid.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function uses <code><a href='neuronbridge_hits.html'>neuronbridge_search</a></code> to get potential matches for data items (i.e. neurons/lines) that you wish to search
(<code>search</code>). It also fetches the same information on data items you would rather not have in your 'hits', i.e.
hemibrain connectome neurons that you do not want to 'also'-be in the lines that come up when you search for you neurons in <code>search</code>. Depending
on your use-case, you may want to read a series of table with <code><a href='neuronbridge_hits.html'>neuronbridge_search</a></code> rather than use this function, to filter your matches.
See details below.</p>
    </div>

    <pre class="usage"><span class='fu'>neuronbridge_avoid</span><span class='op'>(</span><span class='va'>search</span>, <span class='va'>avoid</span>, version <span class='op'>=</span> <span class='st'>"v2_1_1"</span>, threshold <span class='op'>=</span> <span class='fl'>23000</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>search</th>
      <td><p>data item IDs (in <code>neuronbridge_ids</code>) for which you want to find hits.</p></td>
    </tr>
    <tr>
      <th>avoid</th>
      <td><p>data item IDs (in <code>neuronbridge_ids</code>) that you would rather not have in your hits.</p></td>
    </tr>
    <tr>
      <th>version</th>
      <td><p>the precomputed scores to search. For example, <code>"v2_1_1"</code> refers to this <a href='https://neuronbridge.janelia.org/releasenotes/DATA'>release</a>.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>LM-EM matches with a <code>normalizedScore</code> below this value are not returned.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a <code>data.frame</code> of hits. Each row indicates a separate MIP file with its own <code>nb.id</code>. The <code>data.frame</code> is already ranked by <code>normalizedScore</code>.
Top scores (better match) are at the top of the data frame. The columns mean:</p><ul>
<li><p>"publishedName"  - the <code>id</code> for the potential hit neuron/line. I.e. specifies a genetic driver resource or a connectome neuron.
  these are the same ids that can be seen with <code><a href='neuronbridge_ids.html'>neuronbridge_ids</a></code>.</p></li>
<li><p>"libraryName" - the data set from which this data item came.</p></li>
<li><p>"imageURL" - the path on https://s3.amazonaws.com/, at which one can find a 'high res' .png of the MIP file for this data item.</p></li>
<li><p>"thumbnailURL" - the path on https://s3.amazonaws.com/, at which one can find a 'low res' .jpg thumbnail of the MIP file for this data item.</p></li>
<li><p>"slideCode" - the unique identifier for the sample from which the MIP came. The first number indicates the date the image was taken by FlyLight.</p></li>
<li><p>"objective" - the magnification under which the image was taken.</p></li>
<li><p>"gender" - the sex of the fly brain which this data item derives. f = female, m = male.</p></li>
<li><p>"anatomicalArea" - the gross part of the nervous system images, e.g. brain or ventral nervous system.</p></li>
<li><p>"alignmentSpace" - the template brain to which the image that formed this MIP, was aligned.
  Typically, this is the JR2018 standard template brain from <a href='https://doi.org/10.1101/376384'>Bogovic et al. 2018</a>.</p></li>
<li><p>"channel" - number of the channel from the aligned image stack that is represented by this MIP.</p></li>
<li><p>"mountingProtocol" - the protocol used to prepare brain sample for imaging.</p></li>
<li><p>"matchingPixels" - the number of overlapping pixels between query (<code>searched.id</code>) and target (<code>nb.id</code>).</p></li>
<li><p>"gradientAreaGap " - unsure, seeking clarification from NeuronBridge</p></li>
<li><p>"normalizedGapScore" - unsure, seeking clarification from NeuronBridge</p></li>
<li><p>"normalizedScore" - the matching score, created by examining the overlapped pixel number and colourdepth.
  If the colourand xy position of the pixel match between the mask and the searching data,
  then the approach here will count it as a positive matching score</p></li>
<li><p>"searched.id" - the <code>nb.id</code> you searched with, i.e. given to the function call</p></li>
<li><p>"nb.id" - the 'NeuronBridge ID' for the MIP file.</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='neuronbridge_info.html'>neuronbridge_info</a></code>,
  <code><a href='neuronbridge_mip.html'>neuronbridge_mip</a></code>,
  <code><a href='neuronbridge_hits.html'>neuronbridge_search</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

<span class='co'># Get helpful package with some classe hemibrain neuron IDs</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='st'><a href='https://github.com/flyconnectome/hemibrainr'>"hemibrainr"</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'>remotes</span><span class='fu'>::</span><span class='fu'><a href='https://remotes.r-lib.org/reference/install_github.html'>install_github</a></span><span class='op'>(</span><span class='st'>"flyconnectome/hemibrainr"</span><span class='op'>)</span>

<span class='co'># Load package</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/flyconnectome/hemibrainr'>hemibrainr</a></span><span class='op'>)</span>

<span class='co'># So this is the 'olfactory PN' neuron we want</span>
<span class='va'>search</span> <span class='op'>=</span> <span class='st'>"542634818"</span>

<span class='co'># And we do not want these other PNs</span>
<span class='va'>avoid</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sets.html'>setdiff</a></span><span class='op'>(</span><span class='fu'>hemibrainr</span><span class='fu'>::</span><span class='va'><a href='https://flyconnectome.github.io/hemibrainr/reference/classed.ids.html'>pn.ids</a></span>,<span class='va'>search</span><span class='op'>)</span>

<span class='co'># Let's see what we get for ot</span>
<span class='va'>hits</span> <span class='op'>=</span> <span class='fu'>neuronbridge_avoid</span><span class='op'>(</span>search <span class='op'>=</span> <span class='va'>search</span>, avoid <span class='op'>=</span> <span class='va'>avoid</span><span class='op'>)</span>
<span class='co'># View(hits[1:20,])</span>

<span class='op'>}</span><span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alexander Bates.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


