<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get and plot colour MIPs for neurons from NeuronBridge — neuronbridge_mip • neuronbridger</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Get and plot colour MIPs for neurons from NeuronBridge — neuronbridge_mip" />
<meta property="og:description" content="These functions allow one to get (neuronbridge_mip) and plot (plot_mip) colour MIPs (maximum projection images).
MIPs are not 'stacks' of images, but a single image plane where colour encodes depth. The bluer the hue, the more anterior (front of the brain) the signal.
The redder the hue, the more posterior (back of the brain). There may be differences/difficulties plotting images between different operating systems.
Only extensively tested on MacOS Catalina." />
<meta property="og:image" content="/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">neuronbridger</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/split_design.html">split GAL4 design</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/natverse/neuronbridger/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get and plot colour MIPs for neurons from NeuronBridge</h1>
    <small class="dont-index">Source: <a href='https://github.com/natverse/neuronbridger/blob/master/R/mip.R'><code>R/mip.R</code></a></small>
    <div class="hidden name"><code>neuronbridge_mip.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These functions allow one to get (<code>neuronbridge_mip</code>) and plot (<code>plot_mip</code>) colour MIPs (maximum projection images).
MIPs are not 'stacks' of images, but a single image plane where colour encodes depth. The bluer the hue, the more anterior (front of the brain) the signal.
The redder the hue, the more posterior (back of the brain). There may be differences/difficulties plotting images between different operating systems.
Only extensively tested on MacOS Catalina.</p>
    </div>

    <pre class="usage"><span class='fu'>neuronbridge_mip</span><span class='op'>(</span>
  <span class='va'>id</span>,
  dataset <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"detect"</span>, <span class='st'>"by_line"</span>, <span class='st'>"by_body"</span><span class='op'>)</span>,
  images.url <span class='op'>=</span> <span class='st'>"https://s3.amazonaws.com/janelia-flylight-color-depth"</span>,
  db <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span><span class='st'>"neuronbridger"</span><span class='op'>)</span>,
  version <span class='op'>=</span> <span class='st'>"v2_1_1"</span>
<span class='op'>)</span>

<span class='fu'>plot_mip</span><span class='op'>(</span><span class='va'>mip</span>, db <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span><span class='st'>"neuronbridger"</span><span class='op'>)</span>, file.delete <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='fu'>scan_mip</span><span class='op'>(</span>
  <span class='va'>mips</span>,
  no.hits <span class='op'>=</span> <span class='fl'>10</span>,
  type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"hits"</span>, <span class='st'>"files"</span>, <span class='st'>"ids"</span>, <span class='st'>"images"</span><span class='op'>)</span>,
  sleep <span class='op'>=</span> <span class='cn'>NULL</span>,
  images.url <span class='op'>=</span> <span class='st'>"https://s3.amazonaws.com/janelia-flylight-color-depth"</span>,
  db <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span><span class='st'>"neuronbridger"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>neuronbridge_remove_mips</span><span class='op'>(</span>db <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span><span class='op'>(</span><span class='st'>"neuronbridger"</span><span class='op'>)</span>, interactive <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>id</th>
      <td><p>character vector. An identifier/identifiers for the neuron(s)/line(s) you wish to search. This can either be a line code
for a GAL4 line (e.g. <a href='https://v2.virtualflybrain.org/org.geppetto.frontend/geppetto?id=VFBexp_FBtp0057908&amp;i=VFB_00017894'>R16F12</a>)
or a split GAL4 line (e.g. <a href='https://splitgal4.janelia.org/cgi-bin/view_splitgal4_imagery.cgi?line=LH173'>LH173</a>)
or a 'body ID' for a neuron from the <a href='https://neuprint.janelia.org/help/videos?dataset=hemibrain'>hemibrain connectome</a>,
(e.g. <a href='https://neuprint.janelia.org/view?bodyid=1537331894'>1537331894</a>).</p></td>
    </tr>
    <tr>
      <th>dataset</th>
      <td><p>whether the ID given is a body ID (<code>"by_body"</code>) from the hemibrain connectome
or a genetic driver line (<code>"by_line"</code>). If left at <code>"detect"</code> then <code>neuronbridger</code> tries to guess to which <code>id</code> belongs by using
<code>neuronbridger:::guess_dataset</code>.</p></td>
    </tr>
    <tr>
      <th>images.url</th>
      <td><p>the online database from which NeuronBridge gets its MIP files.
Higher res .png files come from https://s3.amazonaws.com/janelia-flylight-color-depth.
Lower res .jpg thumbnails come from https://s3.amazonaws.com/janelia-flylight-color-depth-thumbnails.</p></td>
    </tr>
    <tr>
      <th>db</th>
      <td><p>the directory in which image files are saved (<code>neuronbridge_mip</code>), and from which they are read (<code>plot_mip</code>). This defaults to a temporary
directory: <code><a href='https://rdrr.io/r/base/file.path.html'>file.path(tempdir(),"neuronbridger")</a></code>.</p></td>
    </tr>
    <tr>
      <th>version</th>
      <td><p>the precomputed scores to search. For example, <code>"v2_1_1"</code> refers to this <a href='https://neuronbridge.janelia.org/releasenotes/DATA'>release</a>.</p></td>
    </tr>
    <tr>
      <th>mip</th>
      <td><p>either a full path to <code>.png</code> file or an array describing a image file, e.g. as comes from <code><a href='https://rdrr.io/pkg/png/man/readPNG.html'>png::readPNG</a></code>.</p></td>
    </tr>
    <tr>
      <th>file.delete</th>
      <td><p>logical, whether or not to delete the saved <code>.png</code> file after plotting.</p></td>
    </tr>
    <tr>
      <th>mips</th>
      <td><p>either a data frame of 'hits' (e.g. as produced by <code><a href='neuronbridge_hits.html'>neuronbridge_search</a></code>), a vector of file paths to saved MIP .png files
or ids for data items (i.e. from <code><a href='neuronbridge_ids.html'>neuronbridge_ids</a></code>).</p></td>
    </tr>
    <tr>
      <th>no.hits</th>
      <td><p>the number of hits to visualise if <code>type="hits"</code>.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>the type of argument given as <code>mips</code>.</p></td>
    </tr>
    <tr>
      <th>sleep</th>
      <td><p>defaults to <code>NULL</code>. User needs to press a key to move to the next MIP. If a numeric value, then MIPs progress automatically and
a pause of <code>sleep</code> seconds occurs before the next MIP is shown.</p></td>
    </tr>
    <tr>
      <th>interactive</th>
      <td><p>logical. When using <code>neuronbridge_remove_mips</code>, whether or not to be accosted with an 'are you sure'?.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a named list of <code>.png</code> (<code>neuronbridge_mip</code>) or visualisation of a <code>.png</code> MIP in an <code>rgl</code> display (<code>plot_mip</code>).</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>By default MIPs are saved to your R session's temporary directory. However, you can specify an alternative directory (argument: <code>db</code>).
MIPs are saved as <code>.png</code> files, where the file names are given as <code>id_number.png</code>.</p>
<p>FlyLight file names contain metadata as follows:
<code>'[Publishing Name]-[Slide Code]-[Driver]-[Gender]-[Objective]-[Area/Tile]-[Alignment Space]-CDM_[Channel].png'</code></p>
<p>Find information on these meta data entries by examining <code><a href='neuronbridge_hits.html'>?neuronbridge_hits</a></code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='neuronbridge_ids.html'>neuronbridge_ids</a></code>,
  <code><a href='neuronbridge_info.html'>neuronbridge_info</a></code>,
  <code><a href='neuronbridge_hits.html'>neuronbridge_search</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># Let us now see the related MIP file</span>
<span class='va'>mip</span> <span class='op'>=</span> <span class='fu'>neuronbridge_mip</span><span class='op'>(</span><span class='st'>"542634818"</span><span class='op'>)</span>
<span class='co'>## This gets every MIP file associated with id</span>
<span class='co'>## In this case, just one</span>

<span class='co'># Plot the MIP image in an rgl viewer</span>
<span class='fu'>plot_mip</span><span class='op'>(</span><span class='va'>mip</span><span class='op'>)</span>
<span class='op'>}</span><span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alexander Bates.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


