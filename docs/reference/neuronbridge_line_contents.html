<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Use NeuronBridge to estimate which hemibrain connectome neurons are taregted by a genetic driver line — neuronbridge_line_contents • neuronbridger</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Use NeuronBridge to estimate which hemibrain connectome neurons are taregted by a genetic driver line — neuronbridge_line_contents" />
<meta property="og:description" content="This function uses neuronbridge_search to get potential connectime matches for the given genetic driver line (line).
Each line may have multiple images associated with it, likely because it has undergone stochastic labelling to better see what the line contains. Each
of these images is searched and potential connectome hits returned. Each is assigned its highest score. The final output is filtered to that the LM-EM matching score
is below the given threshold." />
<meta property="og:image" content="/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">neuronbridger</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/split_design.html">split GAL4 design</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/natverse/neuronbridger/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Use NeuronBridge to estimate which hemibrain connectome neurons are taregted by a genetic driver line</h1>
    <small class="dont-index">Source: <a href='https://github.com/natverse/neuronbridger/blob/master/R/identify.R'><code>R/identify.R</code></a></small>
    <div class="hidden name"><code>neuronbridge_line_contents.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function uses <code><a href='neuronbridge_hits.html'>neuronbridge_search</a></code> to get potential connectime matches for the given genetic driver line (<code>line</code>).
Each line may have multiple images associated with it, likely because it has undergone stochastic labelling to better see what the line contains. Each
of these images is searched and potential connectome hits returned. Each is assigned its highest score. The final output is filtered to that the LM-EM matching score
is below the given <code>threshold</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>neuronbridge_line_contents</span><span class='op'>(</span>
  <span class='va'>line</span>,
  neuprintr <span class='op'>=</span> <span class='cn'>TRUE</span>,
  version <span class='op'>=</span> <span class='st'>"v2_1_1"</span>,
  threshold <span class='op'>=</span> <span class='fl'>23000</span>
<span class='op'>)</span>

<span class='fu'>neuronbridge_predict_split</span><span class='op'>(</span>
  <span class='va'>line1</span>,
  <span class='va'>line2</span>,
  neuprintr <span class='op'>=</span> <span class='cn'>TRUE</span>,
  version <span class='op'>=</span> <span class='st'>"v2_1_1"</span>,
  threshold1 <span class='op'>=</span> <span class='fl'>23000</span>,
  threshold2 <span class='op'>=</span> <span class='fl'>23000</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>line</th>
      <td><p>a single ID for a genetic driver line (in <code>neuronbridge_ids</code>) for which you want to find hits.</p></td>
    </tr>
    <tr>
      <th>neuprintr</th>
      <td><p>logical, whether or not to use the package <a href='https://github.com/natverse/neuprintr'>neuprintr</a>
to fetch meta data (e.g. cell body fiber tract, cell type) on the connectome neurons returned. If <code>TRUE</code> then
<code><a href='https://rdrr.io/pkg/neuprintr/man/neuprint_get_meta.html'>neuprintr::neuprint_get_meta</a></code> is used, and additional columns from this call are added to the returned <code>data.frame</code>.</p></td>
    </tr>
    <tr>
      <th>version</th>
      <td><p>the precomputed scores to search. For example, <code>"v2_1_1"</code> refers to this <a href='https://neuronbridge.janelia.org/releasenotes/DATA'>release</a>.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>LM-EM matches with a <code>normalizedScore</code> below this value are not returned.</p></td>
    </tr>
    <tr>
      <th>line1</th>
      <td><p>a line you want to try combining with <code>line2</code>. The aim is to see which neurons are in both <code>line1</code> and <code>line2</code></p></td>
    </tr>
    <tr>
      <th>line2</th>
      <td><p>a line you want to try combining with <code>line1</code>. The aim is to see which neurons are in both <code>line1</code> and <code>line2</code></p></td>
    </tr>
    <tr>
      <th>threshold1</th>
      <td><p>LM-EM matches with a <code>normalizedScore</code> below this value are not returned. Applied to 'hits' for <code>line1</code>.</p></td>
    </tr>
    <tr>
      <th>threshold2</th>
      <td><p>LM-EM matches with a <code>normalizedScore</code> below this value are not returned. Applied to 'hits' for <code>line2</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a <code>data.frame</code> of hits. Each row idnciates a separate MIP file with its own <code>nb.id</code>. The <code>data.frame</code> is already ranked by <code>normalizedScore</code>.
Top scores (better match) are at the top of the data frame. The columns mean:</p><ul>
<li><p>"publishedName"  - the <code>id</code> for the potential hit neuron/line. I.e. specififes a genetic driver resource or a connectome neuron.
  these are the same ids that can be seen with <code><a href='neuronbridge_ids.html'>neuronbridge_ids</a></code>.</p></li>
<li><p>"libraryName" - the data set from which this data item came.
#'</p></li>
<li><p>"normalizedScore" - the matching score, created by examining the overlapped pixel number and colourdepth.
  If the colourand xy position of the pixel match between the mask and the searching data,
  then the approach here will count it as a positive matching score</p></li>
<li><p>"searched" - the <code>line</code> you searched with, i.e. given to the function call</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='neuronbridge_info.html'>neuronbridge_info</a></code>,
  <code><a href='neuronbridge_avoid.html'>neuronbridge_avoid</a></code>,
  <code><a href='neuronbridge_hits.html'>neuronbridge_search</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># Interesting line that labels mushroom body neurons</span>
<span class='co'>## But which ones?</span>
<span class='va'>line</span> <span class='op'>=</span> <span class='st'>"MB543B"</span>

<span class='co'># Let's find out</span>
<span class='va'>contents</span> <span class='op'>=</span> <span class='fu'>neuronbridge_line_contents</span><span class='op'>(</span>line <span class='op'>=</span> <span class='va'>line</span>, threshold <span class='op'>=</span> <span class='fl'>23000</span><span class='op'>)</span>
<span class='co'>## Note! Choosing the right threshold for the nomarlsied MIP-comparison score</span>
<span class='co'>### Is critical. This may take some titring for lines you are really interested in</span>
<span class='co'>#### Though this value is a good first pass.</span>

<span class='co'># So this is what is likely in this line!</span>
<span class='co'>## Note we have meta-data from neuprint! So we can see neuron types and names!!</span>
<span class='co'># View(contents)</span>

<span class='co'># Now let's check what these neurons look like</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='st'><a href='https://github.com/natverse/neuprintr'>"neuprintr"</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'>remotes</span><span class='fu'>::</span><span class='fu'><a href='https://remotes.r-lib.org/reference/install_github.html'>install_github</a></span><span class='op'>(</span><span class='st'>"natverse/neuprintr"</span><span class='op'>)</span>

<span class='co'># Load package</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/natverse/neuprintr'>neuprintr</a></span><span class='op'>)</span>
<span class='co'>## Note you need to 'login' to neuPrint through R</span>
<span class='co'>### Look at the package README and/or examine: ?neuprint_login</span>

<span class='co'># Let's see the EM neurons all together</span>
<span class='va'>neurons</span> <span class='op'>=</span> <span class='fu'>neuprintr</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/neuprintr/man/neuprint_read_neurons.html'>neuprint_read_neurons</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>contents</span><span class='op'>$</span><span class='va'>publishedName</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>plot3d</span><span class='op'>(</span><span class='va'>neurons</span><span class='op'>)</span>

<span class='co'># And compare with the LM data:</span>
<span class='fu'>open3d</span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>mips</span> <span class='op'>=</span> <span class='fu'><a href='neuronbridge_mip.html'>neuronbridge_mip</a></span><span class='op'>(</span><span class='va'>line</span><span class='op'>)</span>
<span class='fu'><a href='neuronbridge_mip.html'>scan_mip</a></span><span class='op'>(</span><span class='va'>mips</span>,type<span class='op'>=</span><span class='st'>"images"</span>, sleep <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>

<span class='op'>}</span><span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alexander Bates.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


